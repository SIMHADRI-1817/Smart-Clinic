<!-- templates/appointments.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>All Appointments</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header class="topbar"><div class="brand">SmartClinic</div></header>
  <main class="centered">
    <div class="card big">
      <h3>All Appointments</h3>
      <table class="table">
        <thead><tr><th>ID</th><th>Patient</th><th>Doctor</th><th>Date</th><th>Time</th><th>Queue</th><th>Status</th><th>Action</th></tr></thead>
        <tbody>
          {% for a in appointments %}
            <tr>
              <td>{{ a.id }}</td>
              <td>{{ a.patient_name }}</td>
              <td>{{ a.doctor_name }}</td>
              <td>{{ a.date }}</td>
              <td>{{ a.time }}</td>
              <td>{{ a.queue_number }}</td>
              <td>{{ a.status }}</td>
              <td>
                {% if a.status not in ['cancelled','checked_in'] %}
                  <a class="btn small" href="{{ url_for('cancel_appointment', appointment_id=a.id) }}">Cancel</a>
                {% else %}
                  <span class="muted">â€”</span>
                {% endif %}
              </td>
            </tr>
          {% else %}
            <tr><td colspan="8"><em>No appointments</em></td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </main>
</body>
</html>